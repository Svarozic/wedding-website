---
import {t, astroI18n} from "astro-i18n";

import pngSlovakia from "./slovakia.png?url";
import pngSerbia from "./serbia.png?url";
import pngUnitedKingdom from "./united-kingdom.png?url";

const LANGUAGES = {
  sk: {
    pngSrc: pngSlovakia,
    label: t("localeLabel", undefined, {locale: "sk"}),
  },
  sr: {
    pngSrc: pngSerbia,
    label: t("localeLabel", undefined, {locale: "sr"}),
  },
  en: {
    pngSrc: pngUnitedKingdom,
    label: t("localeLabel", undefined, {locale: "en"}),
  },
} as const;
---

<div class="dropdown dropdown-end">
  <label tabindex="0" class="tooltip tooltip-left" data-tip={t("localePickerTitle")}>
    <div class="flex items-center -space-x-4 hover:-space-x-0">
      {
        Object.keys(LANGUAGES)
          .filter((langCode) => langCode !== astroI18n.locale)
          .map((langCode) => (
            <img class="h-8 w-8 grayscale" src={LANGUAGES[langCode].pngSrc} alt={LANGUAGES[langCode].label} />
          ))
      }
      <div class="avatar">
        <div class="h-14 w-14">
          <img src={LANGUAGES[astroI18n.locale].pngSrc} alt={LANGUAGES[astroI18n.locale].label} />
        </div>
      </div>
    </div>
  </label>

  <ul tabindex="0" class="menu dropdown-content menu-sm z-[1] mt-3 rounded-box bg-white p-2 shadow">
    {
      Object.keys(LANGUAGES)
        .filter((langCode) => langCode !== astroI18n.locale)
        .map((langCode) => (
          <li>
            <a href={`/${langCode}${astroI18n.route}`} data-astro-reload>
              <div class="w-8">
                <img src={LANGUAGES[langCode].pngSrc} alt={LANGUAGES[langCode].label} />
              </div>
              {LANGUAGES[langCode].label}
            </a>
          </li>
        ))
    }
  </ul>
</div>
